# 应用层

---

## 构成

* 应用服务
* 集成事件订阅者
* 集成事件发布者

## 说明

* 应用层作为界限上下文（Bounded context）的皮肤，是很薄的一层，本身不存在任何的业务逻辑。
* 每一个应用服务的方法都是一个用例（use case），所以一个请求对应一个方法。
* 集成事件源自领域事件，当领域事件需要发布到微服务之外，则在应用层实现一个领域事件处理者，将其转换为集成事件再发布出去。
* 应用层同时负责订阅外界的集成事件，但应用服务和集成事件订阅者不过是触发方式（请求响应/发布订阅）的不同，它们要遵守的原则实际上差不多。
* **注意**：因为每个应用服务的方法都对应一个用例，因此同一个界限上下文中的应用服务不应该存在相互调用的情况，因为：
  1. 如果存在相互调用，则随着系统的迭代最终会让应用服务层形成一个网状依赖的结构，从而提高了维护成本。
  2. 应用服务间存在相互调用，代表着用例的复用，这不仅是破坏了用例的定义，某种程度上还相当于将业务逻辑泄露到应用层，因为这导致应用层中存在对业务逻辑的编排。

